'use client';
import{__rest as e}from"tslib";import t from"react";import{twMerge as l}from"tailwind-merge";import{colorClassNames as r}from"../../../lib/colorClassNames.js";import{borderRadius as a}from"../../../lib/shape.js";import{sizing as s}from"../../../lib/sizing.js";import{spacing as o}from"../../../lib/spacing.js";import{fontSize as i}from"../../../lib/font.js";import{colorPalette as m,DEFAULT_COLOR as n,themeColorRange as c}from"../../../lib/theme.js";import{getColorClassNames as f,makeClassName as g,sumNumericArray as p}from"../../../lib/utils.js";import d,{useTooltip as u}from"../../util-elements/Tooltip/Tooltip.js";const b=g("CategoryBar"),h=({categoryPercentageValues:e})=>{const r=p(e);let a=0,c=0;return t.createElement("div",{className:l(b("labels"),"relative flex w-full",f(n,m.text).textColor,o.sm.marginBottom,s.lg.height,i.sm)},e.slice(0,e.length).map(((e,s)=>{a+=e;const o=(e>=.1*r||c>=.09*r)&&r-a>=.15*r&&a>=.1*r;return c=o?0:c+=e,t.createElement("div",{key:`item-${s}`,className:"flex items-center justify-end",style:{width:`${e}%`}},t.createElement("span",{className:l(o?"block":"hidden","left-1/2 translate-x-1/2")},a))})),t.createElement("div",{className:l("absolute bottom-0 flex items-center",o.none.left)},"0"),t.createElement("div",{className:l("absolute bottom-0 flex items-center",o.none.right)},r))},v=t.forwardRef(((o,i)=>{const{categoryPercentageValues:n=[],colors:g=c,percentageValue:p,showLabels:v=!0,tooltip:w,showAnimation:x=!0,className:N}=o,y=e(o,["categoryPercentageValues","colors","percentageValue","showLabels","tooltip","showAnimation","className"]),E=((e,t,l)=>{if(void 0===e)return"";let a=0;for(let s=0;s<t.length;s++){const o=t[s],i=r[l[s]][m.background].bgColor;if(a+=o,a>=e)return i}return""})(p,n,g),{tooltipProps:j,getReferenceProps:k}=u();return t.createElement(t.Fragment,null,t.createElement(d,Object.assign({text:w},j)),t.createElement("div",Object.assign({ref:i,className:l(b("root"),N)},y),v?t.createElement(h,{categoryPercentageValues:n}):null,t.createElement("div",{className:l(b("barWrapper"),"relative w-full flex items-center",s.xs.height)},t.createElement("div",{className:l("flex-1 flex items-center h-full overflow-hidden",a.md.all)},n.map(((e,a)=>t.createElement("div",{key:`item-${a}`,className:l(b("categoryBar"),"h-full",r[g[a]][m.background].bgColor),style:{width:`${e}%`}})))),void 0!==p?t.createElement("div",Object.assign({ref:j.refs.setReference,className:l(b("markerWrapper"),"absolute right-1/2 -translate-x-1/2",s.lg.width),style:{left:`${p}%`,transition:x?"all 2s":""}},k),t.createElement("div",{className:l(b("marker"),"ring-2 mx-auto",E,f("white").ringColor,s.md.height,s.twoXs.width,a.lg.all)})):null)))}));v.displayName="CategoryBar";export{v as default};
