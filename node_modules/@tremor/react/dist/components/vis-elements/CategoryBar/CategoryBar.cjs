'use client';
"use strict";var e=require("tslib"),t=require("react"),l=require("tailwind-merge"),a=require("../../../lib/colorClassNames.cjs"),r=require("../../../lib/shape.cjs"),s=require("../../../lib/sizing.cjs"),i=require("../../../lib/spacing.cjs"),o=require("../../../lib/font.cjs"),n=require("../../../lib/theme.cjs"),c=require("../../../lib/utils.cjs"),u=require("../../util-elements/Tooltip/Tooltip.cjs");function m(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var g=m(t);const d=c.makeClassName("CategoryBar"),f=({categoryPercentageValues:e})=>{const t=c.sumNumericArray(e);let a=0,r=0;return g.default.createElement("div",{className:l.twMerge(d("labels"),"relative flex w-full",c.getColorClassNames(n.DEFAULT_COLOR,n.colorPalette.text).textColor,i.spacing.sm.marginBottom,s.sizing.lg.height,o.fontSize.sm)},e.slice(0,e.length).map(((e,s)=>{a+=e;const i=(e>=.1*t||r>=.09*t)&&t-a>=.15*t&&a>=.1*t;return r=i?0:r+=e,g.default.createElement("div",{key:`item-${s}`,className:"flex items-center justify-end",style:{width:`${e}%`}},g.default.createElement("span",{className:l.twMerge(i?"block":"hidden","left-1/2 translate-x-1/2")},a))})),g.default.createElement("div",{className:l.twMerge("absolute bottom-0 flex items-center",i.spacing.none.left)},"0"),g.default.createElement("div",{className:l.twMerge("absolute bottom-0 flex items-center",i.spacing.none.right)},t))},b=g.default.forwardRef(((t,i)=>{const{categoryPercentageValues:o=[],colors:m=n.themeColorRange,percentageValue:b,showLabels:h=!0,tooltip:p,showAnimation:w=!0,className:N}=t,v=e.__rest(t,["categoryPercentageValues","colors","percentageValue","showLabels","tooltip","showAnimation","className"]),y=((e,t,l)=>{if(void 0===e)return"";let r=0;for(let s=0;s<t.length;s++){const i=t[s],o=a.colorClassNames[l[s]][n.colorPalette.background].bgColor;if(r+=i,r>=e)return o}return""})(b,o,m),{tooltipProps:C,getReferenceProps:x}=u.useTooltip();return g.default.createElement(g.default.Fragment,null,g.default.createElement(u.default,Object.assign({text:p},C)),g.default.createElement("div",Object.assign({ref:i,className:l.twMerge(d("root"),N)},v),h?g.default.createElement(f,{categoryPercentageValues:o}):null,g.default.createElement("div",{className:l.twMerge(d("barWrapper"),"relative w-full flex items-center",s.sizing.xs.height)},g.default.createElement("div",{className:l.twMerge("flex-1 flex items-center h-full overflow-hidden",r.borderRadius.md.all)},o.map(((e,t)=>g.default.createElement("div",{key:`item-${t}`,className:l.twMerge(d("categoryBar"),"h-full",a.colorClassNames[m[t]][n.colorPalette.background].bgColor),style:{width:`${e}%`}})))),void 0!==b?g.default.createElement("div",Object.assign({ref:C.refs.setReference,className:l.twMerge(d("markerWrapper"),"absolute right-1/2 -translate-x-1/2",s.sizing.lg.width),style:{left:`${b}%`,transition:w?"all 2s":""}},x),g.default.createElement("div",{className:l.twMerge(d("marker"),"ring-2 mx-auto",y,c.getColorClassNames("white").ringColor,s.sizing.md.height,s.sizing.twoXs.width,r.borderRadius.lg.all)})):null)))}));b.displayName="CategoryBar",module.exports=b;
